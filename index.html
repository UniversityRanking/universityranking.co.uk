<section class="hero" style="background-color: #3b0a66; color: white; padding: 2rem 0;">
  <div class="container" style="max-width: 750px; margin: 0 auto; text-align: center;">
    <h1 style="margin: 0 0 1rem;">2025 Top 5 Universities by past students</h1>
    <div style="display: flex; justify-content: center; align-items: center; gap: 1rem;">
      <label for="subject-select" style="font-size: 1.2rem;">Choose a subject:</label>
      <select id="subject-select" style="font-size: 1.2rem; padding: 0.5rem 1rem;">
        <option value="">All Subjects</option>
        <option value="Law">Law</option>
        <option value="Engineering">Engineering</option>
        <option value="Medicine">Medicine</option>
      </select>
    </div>
  </div>
</section>

<section class="table-section" style="background: white; padding: 2rem 1rem;">
  <div class="container" style="max-width: 750px; margin: 0 auto;">
    <div id="ranking-table"></div>
  </div>
</section>

<section class="methodology-preview" style="background: #f4f4f4; padding: 3rem 1rem;">
  <div class="container" style="max-width: 750px; margin: 0 auto; position: relative;">
    <h2>Our Methodology</h2>
    <div class="fade-block" style="position: relative; max-height: 6em; overflow: hidden;">
      <p>
        Our rankings are based entirely on student feedback using the National Student Survey. <br />
        We group responses to reflect teaching quality, support, and assessment. <br />
        A custom weighting lets students sort by what matters most to them.
        <span class="fade-out" style="position: absolute; bottom: 0; left: 0; width: 100%; height: 2em; background: linear-gradient(to bottom, rgba(244,244,244,0), #f4f4f4);"></span>
      </p>
      <div style="text-align: center; margin-top: 1rem;">
        <button onclick="document.querySelector('.fade-block').classList.add('expanded')" style="background: #3b0a66; color: white; border: none; border-radius: 50%; width: 40px; height: 40px; font-size: 1.5rem;">â†“</button>
      </div>
    </div>
  </div>
</section>

<section class="blog-preview" style="background: #f9f9f9; padding: 3rem 1rem;">
  <div class="container" style="max-width: 750px; margin: 0 auto;">
    <h2>Recent Articles</h2>
    <div class="blog-cards" style="display: flex; overflow-x: auto; gap: 1rem; padding-top: 1rem;">
      {% for post in site.posts limit:5 %}
      <div class="blog-card" style="min-width: 250px; background: white; border: 1px solid #ddd; padding: 1rem; flex-shrink: 0;">
        <h3><a href="{{ post.url }}" style="text-decoration: none; color: #3b0a66;">{{ post.title }}</a></h3>
        <p>{{ post.excerpt | strip_html | truncatewords: 20 }}</p>
      </div>
      {% endfor %}
    </div>
  </div>
</section>

<script>
  document.addEventListener('DOMContentLoaded', function () {
    new Tabulator("#ranking-table", {
      ajaxURL: "/assets/tables/MainTable.json",
      height: "600px",
      layout: "fitColumns",
      columns: [
        { title: "2024", field: "2024" },
        { title: "2023", field: "2023" },
        { title: "Provider", field: "Provider" },
        { title: "2024 Score", field: "2024 Score" }
      ],
      rowFormatter: function(row) {
        if (row.getPosition() === 0) {
          row.getElement().style.borderTopLeftRadius = "10px";
          row.getElement().style.borderTopRightRadius = "10px";
        } else {
          row.getElement().style.backgroundColor = "white";
        }
      }
    });
  });
</script>
